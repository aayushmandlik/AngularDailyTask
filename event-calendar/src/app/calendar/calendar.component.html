<div
  style="padding:20px; border:1px solid #e5e5e5; border-radius:16px; background:white; box-shadow:0 4px 12px rgba(0,0,0,0.05);">
  <!-- Header -->
  <div style="display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; gap:15px;">
    <button mat-button class="add-event-btn" (click)="openFormDialog()"
      style="display:flex; align-items:center; background:#00b894; color:white; border-radius:12px; padding:12px 18px; gap:8px; font-weight:500;">
      <mat-icon>add</mat-icon>
      <span>Add Meal Event</span>
    </button>

    <div *ngIf="calenderMode==='Week'" style="display:flex; align-items:center; gap:10px;">
      <mat-icon (click)="previousWeek()" class="nav-btn"
        style="background:#dfe6e9; padding:6px; border-radius:8px; cursor:pointer;">arrow_back_ios</mat-icon>
      <h2 style="margin:0;">{{weekStartDate | date:'MMM d'}} - {{weekEndDate | date:'MMM d, y'}}</h2>
      <mat-icon (click)="nextWeek()" class="nav-btn"
        style="background:#dfe6e9; padding:6px; border-radius:8px; cursor:pointer;">arrow_forward_ios</mat-icon>
    </div>

    <div *ngIf="calenderMode==='Month'" style="display:flex; align-items:center; gap:10px;">
      <mat-icon (click)="previosMonth()" class="nav-btn"
        style="background:#dfe6e9; padding:6px; border-radius:8px; cursor:pointer;">arrow_back_ios</mat-icon>
      <h2 style="margin:0;">{{months[currentMonth]}} {{currentYear}}</h2>
      <mat-icon (click)="nextMonth()" class="nav-btn"
        style="background:#dfe6e9; padding:6px; border-radius:8px; cursor:pointer;">arrow_forward_ios</mat-icon>
    </div>

    <button mat-button class="toggle-view-btn" (click)="toggleButton()"
      style="background:#0984e3; color:white; border-radius:12px; padding:12px 18px; font-weight:500;">
      {{calenderMode === 'Month' ? 'Week View' : 'Month View'}}
    </button>
  </div>

  <!-- Days of week -->
  <div style="display:grid; grid-template-columns:repeat(7,1fr); gap:8px; margin-top:20px;">
    <div *ngFor="let day of days"
      style="font-weight:600; text-align:center; color:#636e72; background:#dfe6e9; padding:10px; border-radius:8px;">
      {{day}}
    </div>
  </div>

  <!-- Dates grid -->
  <div [ngClass]="{'month-grid': calenderMode==='Month','week-grid': calenderMode==='Week'}"
    style="margin-top:10px; gap:8px;">
    <mat-card *ngFor="let date of calenderDates" class="date-card" [ngClass]="{
        'month-view-card-height': calenderMode==='Month',
        'week-view-card-height': calenderMode==='Week',
        'previous-month': date.getMonth()===currentMonth-1,
        'current-month': date.getMonth()===currentMonth,
        'next-month': date.getMonth()===currentMonth+1,
        'today': date.toDateString() === currenDate.toDateString()
      }"
      style="padding:8px; border-radius:12px; cursor:pointer; display:flex; flex-direction:column; align-items:flex-start; background:white; box-shadow:0 2px 6px rgba(0,0,0,0.05);"
      (click)="toggleCard(date)">
      <div style="font-weight:600; margin-bottom:5px;">{{date.getDate()}}</div>

      <!-- Events -->
      <div *ngFor="let event of events" (click)="openEventDetailsDialog(event, $event)">
        <div *ngIf="event.date === date.toDateString()"
          [ngClass]="{'month-event': calenderMode==='Month', 'week-event': calenderMode==='Week'}"
          style="color:white; border-radius:8px; padding:0px 6px; font-size:12px; margin-top:4px; display:inline-block;">
          <span *ngIf="calenderMode==='Month'">Event:{{event.id}}</span>
          <span *ngIf="calenderMode==='Week'">{{event.title}}<br><small>{{event.time}}</small></span>
        </div>
      </div>
    </mat-card>
  </div>
</div>
